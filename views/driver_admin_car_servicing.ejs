
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>TELNET Super App</title>
	 <!-- core:css --> 
	<link rel="stylesheet" href="../assets/vendors/core/core.css">
	 <!-- endinject --> 
  <!-- plugin css for this page --> 
  <link rel="stylesheet" href="../assets/vendors/simplemde/simplemde.min.css">
  <link rel="stylesheet" href="../assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css">
   <!-- end plugin css for this page --> 
   <link rel="stylesheet" type="text/css" href="../assets/vendors/datatables/css/jquery.dataTables.min.css">
	 <!-- inject:css -->
	<link rel="stylesheet" href="../assets/fonts/feather-font/css/iconfont.css">
	<link rel="stylesheet" href="../assets/vendors/flag-icon-css/css/flag-icon.min.css">
	<link rel="stylesheet" href="../assets/vendors/mdi/css/materialdesignicons.min.css">
	 <!-- endinject --> 
  <!-- Layout styles -->   
  <link rel="stylesheet" href="../assets/css/demo_1/style.css">
  <link rel="stylesheet" href="../assets/css/demo_1/custom.css">
 <!-- End layout styles --> 
  <link rel="shortcut icon" href="../assets/images/favicon.png" />
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxy/1.6.1/scripts/jquery.ajaxy.min.js"></script>
</head>
<body>
	<div class="main-wrapper">

    <% if (userDetails.role == 'Staff') { %>
      <%- include('./bars/sidebar_staff') %>
      <% } else if (userDetails.role == 'Supervisor') { %>
      <%- include('./bars/sidebar_sup') %>  
      <% } else if (userDetails.role == 'Auditor') { %>
      <%- include('./bars/sidebar_auditor') %> 
      <% } else if (userDetails.role == 'Finance') { %>
      <%- include('./bars/sidebar_finance') %>
      <%  } else if (userDetails.role == 'Driver Admin') { %>
      <%- include('./bars/sidebar_driver') %>  
      <%  } else if (userDetails.role == 'Director') { %>
      <%- include('./bars/sidebar_director') %>
      <%  } else if (userDetails.role == 'Group Managing Director') { %>
      <%- include('./bars/sidebar_gmd') %>  
      <%  } else if (userDetails.role == 'Driver') { %>
      <%- include('./bars/sidebar_carDriver') %>  
      <%  } else { %>
      <%- include('./bars/sidebar') %>    
      <%  } %>
        <!-- partial -->
      
        <div class="page-wrapper">
            
          <!-- partial:partials/_navbar.html, this represents the topbar bar -->
          <%- include('./bars/topbar') %>
          <!-- partial -->

      
      <div class="page-content">

        <div class="row">
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                 <!-- <h6 id="totalStaff" class="card-title">Staff</h6> --> 
                <h6 class="card-title">Drivers</h6>
                <h1 id="totalDrivers">0</h1>
              </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Trips</h6>
                <h1 id="totalTrips">0</h1>
              </div>
            </div>
          </div>
          <div class="col-md-3 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Totla Vehicles</h6>
                <h1 id="totalVehicles">0</h1>
              </div>
            </div>
          </div>
          <div class="col-md-3 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6  class="card-title">Available Vehicles</h6>
                <h1 id="availableVehicles">0</h1>
              </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Request</h6>
                <h1 id="totalRequest">0</h1>
              </div>
            </div>
          </div>
          <!-- <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6  class="card-title">Vehicles</h6>
                <h1 id="totalVehicles">0</h1>
              </div>
            </div>
          </div> -->
        </div>

        
            <div class="col-md-12">
  
              <!-- <form id="requestInfo">
                <div class="card-body"> 
                    <div class="form-group">
                        <div class="col-12">
                            <div class="row">
                                <label for="start_date"> Start Date </label>
                                <input type="date" class="form-control" placeholder="Start Date" name="start_date">
                            </div>
                        </div>
                        <br>
                        <div class="col-12">
                            <div class="row">
                                <label for="end_date"> End Date</label>
                                <input type="date" class="form-control" placeholder="End Date" name="end_date">
                            </div>
                        </div>
                    </div> -->
                    <!-- <input type="submit" class="btn btn-success" value="View"> -->
                     <!-- <button type="submit" href="#" class="btn btn-info">View</button>
                </div>
              </form>
   -->
            <table id="TripRange" class="table table-bordered table-hover">
                <thead>
                <tr>
                  <th>Vehicle Make</th>
                  <th>Vehicle Model</th>
                  <th>Service Count Down</th>
                  <th>Driver Name</th>
                  <th>Next Service Date</th>
                </tr>
                </thead>
                <tbody  id="result">
                 
                </tbody>
            </table>
            </div>
          </div>

        <!-- <div class="row">
          <div class="col-xl-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Trips and Request By Subsidiary</h6>
                <canvas id="RequestInSubsidiaryID"></canvas>
              </div>
            </div>
          </div> -->
          <!-- <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Request in Each Subsdiary</h6>
                <canvas id="RequestInSubsidiaryID"></canvas>
              </div>
            </div>
          </div> -->
        </div>

        <!-- <div class="row">
          <div class="col-md-12">
          <table id="TripRange" class="table table-bordered table-hover">
              <thead>
              <tr>
                <th>Request</th>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Department</th>
                <th>Subsidiary</th>
              </tr>
              </thead>
              <tbody  id="result">
               
              </tbody>
          </table>
          </div>
        </div> -->

         <!-- <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Doughnut chart</h6>
                <canvas id="chartjsDoughnut"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Area chart</h6>
                <canvas id="chartjsArea"></canvas>
              </div>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Pie chart</h6>
                <canvas id="chartjsPie"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Bubble chart</h6>
                <canvas id="chartjsBubble"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Radar chart</h6>
                <canvas id="chartjsRadar"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Polar area chart</h6>
                <canvas id="chartjsPolarArea"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xl-6 grid-margin grid-margin-xl-0 stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Grouped bar chart</h6>
                <canvas id="chartjsGroupedBar"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Mixed bar chart</h6>
                <canvas id="chartjsMixedBar"></canvas>
              </div>
            </div>
          </div>
        </div> --> 

			</div>

			 <!-- partial:../../partials/_footer.html --> 
       <%- include('./bars/footer') %>
			 <!-- partial --> 
	
		</div>
  </div>

  <!-- <script>
    const dashboard = document.getElementById('authors');
    const url = 'http://173.212.213.205:8090/api/v1/accounts/totals';

    





  </script> -->

  <!-- beforeSend: function (xhr) {
    xhr.setRequestHeader ("Authorization", "Bearer  0a80ea028c9f552632b2ad03a6fcc2043ac79b62"); -->
  
  <script>
$(document).ready(function(){

  $.ajax({
        url:'https://telnetsupperapp.com.ng:8443/api/v1/core/driver_admin_totals',
        // url:'https://cors-anywhere.herokuapp.com/http://173.212.208.45:8000/api/v1/core/driver_admin_totals',
        type:'GET',
        dataType: 'json',
        success:function(data){
            if(data){
                $('#totalDrivers').html('<h1>'+ data.total_drivers +'</h1>');
                $('#totalTrips').html('<h1>'+ data.total_trips +'</h1>');
                $('#totalVehicles').html('<h1>'+ data.total_vehicles +'</h1>');
                $('#availableVehicles').html('<h1>'+ data.available_vehicles +'</h1>');  
                $('#totalRequest').html('<h1>'+ data.total_request +'</h1>');  
                // $('#totalVehicles').html('<h1>'+ data.total_vehicle +'</h1>');  
            }               
        }, 
        error:function(data){
      //    alert('Error Retrieving data');
        }
      });

// $('#membertypeForm').submit(function(evt){
 
//      $('#nodata').hide();

//     evt.preventDefault();
//     var reqobj = new Object();
//         reqobj.first = $('#first').val();
//         reqobj.last = $('#last').val();
//         var dsent = JSON.stringify(reqobj);

$.ajax({
    // url: "http://cors-anywhere.herokuapp.com/173.212.213.205:8090/api/v1/vehicle/vehicle",
    url:'https://cors-anywhere.herokuapp.com/http://173.212.213.205:8090/api/v1/vehicle/vehicle',
    type: "GET",
    contentType: "application/json; charset=utf-8",
    // data: input,
    beforeSend: function (xhr) {
    xhr.setRequestHeader ("Authorization", "Token 0a80ea028c9f552632b2ad03a6fcc2043ac79b62")
    },
	success: function(result){
        console.log(result);
        $("#TripRange").DataTable({
            "aaData" : result,
            columns: [
                {
                    data: "vmake"
                },
                {
                    data: "vmodel"
                },
                {
                    data: "servicing_countdown"
                },
                {
                    data: "driver_name"
                },
                {
                    data: "next_servicing_date"
                },
            ]
        });
	}
})
})
// });
  </script>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="./myChart.js"></script>

	 <!-- core:js -->
	<script src="../assets/vendors/core/core.js"></script>
	 <!-- endinject -->
   <!-- plugin js for this page --> 
  <script src="../assets/vendors/simplemde/simplemde.min.js"></script>
  <script src="../assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
	 <!-- end plugin js for this page --> 
	 <!-- inject:js --> 
	<script src="../assets/vendors/feather-icons/feather.min.js"></script>
	<script src="../assets/js/template.js"></script>
   <!-- endinject --> 
   <script src="../assets/vendors/datatables/js/jquery.dataTables.min.js"></script>

  <!-- custom js for this page -->
  <script src="../assets/js/simplemde.js"></script>
  <script src="../assets/js/dashboard.js"></script>
  <script src="../assets/js/datepicker.js"></script>
  <!-- end custom js for this page --> 
  <script src="../assets/js/chartjs.js"></script>
  <script src="../assets/vendors/chartjs/Chart.min.js"></script>
  <script src="../views/pages/dashboard.ejs"></script>
</body>
</html>