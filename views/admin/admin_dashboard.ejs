
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Telnet Super App</title>
	 <!-- core:css --> 
	<link rel="stylesheet" href="../assets/vendors/core/core.css">
	 <!-- endinject --> 
  <!-- plugin css for this page --> 
  <link rel="stylesheet" href="../assets/vendors/simplemde/simplemde.min.css">
  <link rel="stylesheet" href="../assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css">
   <!-- end plugin css for this page --> 
   <link rel="stylesheet" type="text/css" href="../assets/vendors/datatables/jquery.dataTables.min.css">
	 <!-- inject:css -->
	<link rel="stylesheet" href="../assets/fonts/feather-font/css/iconfont.css">
	<link rel="stylesheet" href="../assets/vendors/flag-icon-css/css/flag-icon.min.css">
	<link rel="stylesheet" href="../assets/vendors/mdi/css/materialdesignicons.min.css">
	 <!-- endinject --> 
  <!-- Layout styles -->   
  <link rel="stylesheet" href="../assets/css/demo_1/style.css">
  <link rel="stylesheet" href="../assets/css/demo_1/custom.css">
 <!-- End layout styles --> 
  <link rel="shortcut icon" href="../assets/images/favicon.png" />
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxy/1.6.1/scripts/jquery.ajaxy.min.js"></script>
  <link rel="stylesheet" href="../../../assets/vendors/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
</head>
<body>
	<div class="main-wrapper">

    <%- include('./bars/admin_sidebar') %>
	
		<div class="page-wrapper">
				
      <%- include('./bars/admin_topbar') %>

      
      <div class="page-content">
        <%- include('.././partials/messages')%>
        <div class="row">
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                 <!-- <h6 id="totalStaff" class="card-title">Staff</h6> --> 
                <h6 class="card-title">Staff</h6>
                <div class="d-flex justify-content-between align-items-center">
                <span class="dashboard_font" id="totalStaff">0</span>
                <div>
                <span class="dashboard" > 
                  <i class="fas fa-user-friends circleOne"></i> 
              </span>
            </div>
            </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Department</h6>
                <div class="d-flex justify-content-between align-items-center">
                <h1 class="dashboard_font" id="totalDepartment">0</h1>
                <span class="dashboard" > 
                  <i class="fas fa-building circleFour" ></i> 
              </span>
            </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Subsidiary</h6>
                <div class="d-flex justify-content-between align-items-center">
                <h1 class="dashboard_font" id="totalSubsidiary">0</h1>
                <span class="dashboard" > 
                  <i class="fas fa-building circleThree"></i> 
              </span>
              </div>
            </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6  class="card-title">Supervisors</h6>
                <div class="d-flex justify-content-between align-items-center">
                <h1 class="dashboard_font" id="totalSupervisors">0</h1>
                <span class="dashboard" > 
                  <i class="fas fa-user-friends circleOne"></i> 
              </span>
            </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Drivers</h6>
                <div class="d-flex justify-content-between align-items-center">
                <h1 class="dashboard_font" id="totalDrivers">0</h1>
                <span class="dashboard" > 
                  <i class="fas fa-user-friends circleTwo"></i> 
              </span>
            </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 grid-margin">
            <div class="card">
              <div class="card-body">
                <h6  class="card-title">Vehicles</h6>
                <div class="d-flex justify-content-between align-items-center">
                <h1 class="dashboard_font" id="totalVehicles">0</h1>
                <span class="dashboard" > 
                  <i class="fas fa-car circleThree"></i> 
              </span>
              </div>
            </div>
            </div>
          </div>
        </div>

        <!-- <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Trips In Each Department</h6>
                <canvas id="TripsInSubsidiaryID"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Request in Each Subsdiary</h6>
                <canvas id="RequestInSubsidiaryID"></canvas>
              </div>
            </div>
          </div>
        </div> -->

        <div class="row">
          <div class="col-md-12">
          <table id="RequestInfo" class="table table-bordered table-hover">
              <thead>
              <tr>
                <th>Requester Name</th>
                <th>Requester Email</th>
                <th>Requester Role</th>
                <th>Date Requested</th>
                <th>Requester Upline</th>
              </tr>
              </thead>
              <tbody  id="result">
               
              </tbody>
          </table>
          </div>
        </div>

         <!-- <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Doughnut chart</h6>
                <canvas id="chartjsDoughnut"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Area chart</h6>
                <canvas id="chartjsArea"></canvas>
              </div>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Pie chart</h6>
                <canvas id="chartjsPie"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Bubble chart</h6>
                <canvas id="chartjsBubble"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Radar chart</h6>
                <canvas id="chartjsRadar"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Polar area chart</h6>
                <canvas id="chartjsPolarArea"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xl-6 grid-margin grid-margin-xl-0 stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Grouped bar chart</h6>
                <canvas id="chartjsGroupedBar"></canvas>
              </div>
            </div>
          </div>
          <div class="col-xl-6 stretch-card">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Mixed bar chart</h6>
                <canvas id="chartjsMixedBar"></canvas>
              </div>
            </div>
          </div>
        </div> --> 

			</div>

			 <!-- partial:../../partials/_footer.html --> 
       <%- include('./bars/admin_footer') %>
			 <!-- partial --> 
	
		</div>
  </div>

  <!-- <script>
    const dashboard = document.getElementById('authors');
    const url = 'http://173.212.213.205:8090/api/v1/accounts/totals';

    





  </script> -->
  
  <script>
    $(document).ready(function(){

      // *Total No* //
      //var url = "dashboard.ejs";
      $.ajax({
        url:'https://telnetsupperapp.com.ng:8443/api/v1/accounts/totals',
        type:'GET',
        dataType: 'json',
        success:function(data){
            if(data){
                $('#totalStaff').html(data.total_staff);
                $('#totalDepartment').html(data.total_department);
                $('#totalSubsidiary').html(data.total_subsidiary);
                $('#totalSupervisors').html(data.total_supervisor);  
                $('#totalDrivers').html(data.total_driver);  
                $('#totalVehicles').html(data.total_vehicle);  
            }               
        }, 
        error:function(data){
      //    alert('Error Retrieving data');
        }
      });

      // *RequestInSubsidiary Bar Chart right* //
    var RequestInSubsidiary = function(iteco,softworks,telnet){
        if($('#RequestInSubsidiaryID').length) {
          new Chart($("#RequestInSubsidiaryID"), {
            type: 'bar',
            data: {
              labels: [ "iTECO", "Softworks", "TELNET"],
              datasets: [
                {
                  label: "Subsidiary",
                  backgroundColor: ["#66d1d1","#b1cfec","#fa8072"],
                  data: [iteco,softworks,telnet]
                }
              ]
            },
            options: {
              legend: { display: true },
            }
          });
        }
    }
        //var url = "dashboard.ejs";
        $.ajax({
          url:'https://telnetsupperapp.com.ng:8443/api/v1/core/total_vrequest_subsidiaries',
          type:'GET',
          dataType: 'json',
          success:function(data){
              if(data){
                let iteco     = data.iteco_vehicle_request_count;
                let softworks = data.softworks_vehicle_request_count;
                let telnet    = data.telnet_vehicle_request_count;
                RequestInSubsidiary(iteco,softworks,telnet);
              }               
          }, 
          error:function(data){
           // alert('Error Retrieving data');
          }
        });


         // *RequestInSubsidiary Bar Chart left* //
    var TripsInSubsidiaryID = function(iteco,softworks,telnet){
        if($('#TripsInSubsidiaryID').length) {
          new Chart($("#TripsInSubsidiaryID"), {
            type: 'bar',
            data: {
              labels: [ "iTECO", "Softworks", "TELNET"],
              datasets: [
                {
                  label: "Subsidiary",
                  backgroundColor: ["#66d1d1","#7ee5e5","#5e77f9"],
                  data: [iteco,softworks,telnet]
                }
              ]
            },
            options: {
              legend: { display: true },
            }
          });
        }
    }
        //var url = "dashboard.ejs";
        $.ajax({
          url:'https://telnetsupperapp.com.ng:8443/api/v1/core/total_subsidiary_trip',
          type:'GET',
          dataType: 'json',
          success:function(data){
              if(data){
                let iteco     = data.iteco_total_trips;
                let softworks = data.softworks_total_trips;
                let telnet    = data.telnet_total_trips;
                TripsInSubsidiaryID(iteco,softworks,telnet);
              }               
          }, 
          error:function(data){
           // alert('Error Retrieving data');
          }
        });


//         $(document).ready(function() {
//     $('#example').DataTable( {
//         "ajax": "data/objects.txt",
//         "columns": [
//             { "data": "name" },
//             { "data": "position" },
//             { "data": "office" },
//             { "data": "extn" },
//             { "data": "start_date" },
//             { "data": "salary" }
//         ]
//     } );
// } );


jQuery(document).ready(function($) {
 
 var jobtable = $('#RequestInfo').DataTable({
   ajax: {
    url: "https://telnetsupperapp.com.ng:8443/api/v1/core/vrequest/all_requests",
          dataSrc: "",
          type:'GET',
          dataType: 'json',
		  beforeSend: function (xhr) {
                xhr.setRequestHeader ('Authorization', 'Token 48a79b9a6fcef0b70b6a9219e392205c7327c701');
            },
   },
   columns: [
          {
              data: "requester_name"
          },
          {
              data: "requester_email"
          },
          {
              data: "requester_role"
          },
          {
              data: "request_date"
          },
          {
              data: "requester_upline"
          },
          
      ]
   
 });
});






        $("#RequestInfoooo").DataTable({
      ajax: {
          url: "https://telnetsupperapp.com.ng:8443/api/v1/core/vrequest/all_requests",
          dataSrc: "",
          type:'GET',
          dataType: 'json',
		  beforeSend: function (xhr) {
                xhr.setRequestHeader ('Authorization', 'Token 48a79b9a6fcef0b70b6a9219e392205c7327c701');
            },
            success:function(data){
              if(data){
               
                
               // console.log(data)
                // let requester_name = data.data.requester_name;
                //console.log(data);

                // $.each(data, function(key, value) {
                //     //For example
                //     let requester_name = value.requester_name;
                //     // console.log(value.requester_name)
                //     // console.log(value.requester_email)
                //     // console.log(value.requester_role)
                // });
                
              }               
          }, 
          error:function(data){
            console.log("Error Occurred!!")
          }
          
      },
      columns: [
          {
              data: "requester_name"
          },
          {
              data: "requester_email"
          },
          {
              data: "requester_role"
          },
          {
              data: "request_date"
          },
          {
              data: "requester_upline"
          },
          
      ]
            });


    });
  </script>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="./myChart.js"></script>

	 <!-- core:js -->
	<script src="../assets/vendors/core/core.js"></script>
	 <!-- endinject -->
   <!-- plugin js for this page --> 
  <script src="../assets/vendors/simplemde/simplemde.min.js"></script>
  <script src="../assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
	 <!-- end plugin js for this page --> 
	 <!-- inject:js --> 
	<script src="../assets/vendors/feather-icons/feather.min.js"></script>
	<script src="../assets/js/template.js"></script>
   <!-- endinject --> 
   <script src="../assets/vendors/datatables/jquery.dataTables.min.js"></script>

  <!-- custom js for this page -->
  <script src="../assets/js/simplemde.js"></script>
  <script src="../assets/js/dashboard.js"></script>
  <script src="../assets/js/datepicker.js"></script>
  <!-- end custom js for this page --> 
  <script src="../assets/js/chartjs.js"></script>
  <script src="../assets/vendors/chartjs/Chart.min.js"></script>
  <script src="../views/pages/dashboard.ejs"></script>
</body>
</html>